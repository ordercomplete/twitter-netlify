"use strict";(self.webpackChunktwitter_netlify=self.webpackChunktwitter_netlify||[]).push([[760],{760:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var a=s(43),r=s(250),d=s(347),l=s(910),n=s(869),o=s(353),c=s(338),i=s(579);function p(e){let{username:t,date:s,text:d}=e;const{value:l}=(0,a.useContext)(c.Dx);return(0,i.jsxs)(r.A,{children:[(0,i.jsxs)("div",{className:"post-content",children:[(0,i.jsxs)("span",{style:{color:`var(--${l}-text-color-user)`},className:"post-content__username",children:["@",t]}),(0,i.jsx)("span",{style:{color:`var(--${l}-text-color-date)`},className:"post-content__date",children:s})]}),(0,i.jsx)("p",{style:{color:`var(--${l}-text-color)`},className:"post-content__text",children:d})]})}const x=(0,a.memo)(p);var u=s(848),m=s(999);function y(e){let{id:t,username:s,text:c,date:p,onRemovePost:y}=e;const[h,j]=(0,a.useReducer)(u.Od,u.JP,(e=>({...e,data:{id:t,username:s,text:c,date:p,reply:[]}}))),f=(0,a.useCallback)((e=>{j({type:u.Ox.SUCCESS,payload:{...h.data,reply:[e,...h.data.reply]}})}),[h.data]),v=(0,a.useCallback)((()=>{j({type:u.Ox.PROGRESS});try{const e=(0,m.tY)(h.data.id);if(!e)throw new Error("Post not found");j({type:u.Ox.SUCCESS,payload:C({post:e})})}catch(e){j({type:u.Ox.ERROR,payload:e.message})}}),[h.data.id]),C=e=>{let{post:t}=e;return{id:t.id,username:t.username,text:t.text,date:(0,o.p)(t.date),reply:(t.reply||[]).reverse().map((e=>{let{id:t,username:s,text:a,date:r}=e;return{id:t,username:s,text:a,date:(0,o.p)(r)}})),isEmpty:!t.reply||0===t.reply.length}},[S,_]=(0,a.useState)(!1);(0,a.useEffect)((()=>{S&&v()}),[v,S]);return(0,i.jsxs)(d.A,{style:{padding:"0"},children:[(0,i.jsxs)("div",{className:"post-header",children:[(0,i.jsx)("div",{className:"post-header-data",onClick:()=>{_(!S)},children:(0,i.jsx)(x,{username:h.data.username,date:h.data.date,text:h.data.text})}),(0,i.jsx)("button",{onClick:()=>{return e=h.data.id,(0,m.ys)(e),void(y&&y(e));var e},className:"field-form__button-del",children:"X"})]}),S&&(0,i.jsx)("div",{style:{padding:"0 20px 20px 20px"},children:(0,i.jsxs)(r.A,{children:[(0,i.jsx)(d.A,{className:"post-item__inside-box",children:(0,i.jsx)(l.A,{placeholder:"Post your reply!",button:"Reply",id:h.data.id,onSubmit:async e=>{try{const t=await(0,m.fC)(h.data.id,e);f(t),v()}catch(t){console.error(t)}},onCreate:v})}),h.status===n.M1.PROGRESS&&(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)(d.A,{children:(0,i.jsx)(n.EA,{})}),(0,i.jsx)(d.A,{children:(0,i.jsx)(n.EA,{})})]}),h.status===n.M1.ERROR&&(0,i.jsx)(n.Fc,{status:h.status,message:h.message}),h.status===n.M1.SUCCESS&&!h.data.isEmpty&&h.data.reply.map((e=>(0,i.jsx)(a.Fragment,{children:(0,i.jsxs)(d.A,{className:"post-reply",children:[(0,i.jsx)(x,{...e}),(0,i.jsx)("button",{onClick:()=>{return t=h.data.id,s=e.id,(0,m.eL)(t,s),console.log("Deleting reply with id:",s),void v();var t,s},className:"field-form__button-del",children:"X"})]})},e.id)))]})})]})}}}]);
//# sourceMappingURL=760.eb5698c0.chunk.js.map