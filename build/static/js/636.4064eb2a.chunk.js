"use strict";(self.webpackChunktwitter_netlify=self.webpackChunktwitter_netlify||[]).push([[636],{636:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var a=s(43),r=s(250),n=s(347),d=s(910),l=s(869),c=s(353),i=s(338),o=s(579);function x(e){let{username:t,date:s,text:n}=e;const{value:d}=(0,a.useContext)(i.Dx);return(0,o.jsxs)(r.A,{children:[(0,o.jsxs)("div",{className:"post-content",children:[(0,o.jsxs)("span",{style:{color:`var(--${d}-text-color-user)`},className:"post-content__username",children:["@",t]}),(0,o.jsx)("span",{style:{color:`var(--${d}-text-color-date)`},className:"post-content__date",children:s})]}),(0,o.jsx)("p",{style:{color:`var(--${d}-text-color)`},className:"post-content__text",children:n})]})}const p=(0,a.memo)(x);var u=s(848);function m(e){let{id:t,username:s,text:i,date:x}=e;const[m,y]=(0,a.useReducer)(u.Od,u.JP,(e=>({...e,data:{id:t,username:s,text:i,date:x,reply:null}}))),h=(0,a.useCallback)((async()=>{y({type:u.Ox.PROGRESS});try{const e=await fetch(`http://localhost:4000/post-item?id=${m.data.id}`),t=await e.json();e.ok?y({type:u.Ox.SUCCESS,payload:j(t)}):y({type:u.Ox.ERROR,payload:t.message})}catch(e){y({type:u.Ox.ERROR,payload:e.message})}}),[m.data.id]),j=e=>{let{post:t}=e;return{id:t.id,username:t.username,text:t.text,date:(0,c.p)(t.date),reply:t.reply.reverse().map((e=>{let{id:t,username:s,text:a,date:r}=e;return{id:t,username:s,text:a,date:(0,c.p)(r)}})),isEmpty:0===t.reply.length}},[R,E]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{!0===R&&h()}),[h,R]),(0,o.jsxs)(n.A,{style:{padding:"0"},children:[(0,o.jsx)("div",{style:{padding:"20px",cursor:"pointer"},onClick:()=>{E(!R)},children:(0,o.jsx)(p,{username:m.data.username,date:m.data.date,text:m.data.text})}),R&&(0,o.jsx)("div",{style:{padding:"0 20px 20px 20px"},children:(0,o.jsxs)(r.A,{children:[(0,o.jsx)(n.A,{className:"post-item__inside-box",children:(0,o.jsx)(d.A,{placeholder:"Post your reply!",button:"Reply",id:m.data.id,onCreate:h})}),m.status===l.M1.PROGRESS&&(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)(n.A,{children:(0,o.jsx)(l.EA,{})}),(0,o.jsx)(n.A,{children:(0,o.jsx)(l.EA,{})})]}),m.status===l.M1.ERROR&&(0,o.jsx)(l.Fc,{status:m.status,message:m.message}),m.status===l.M1.SUCCESS&&!1===m.data.isEmpty&&m.data.reply.map((e=>(0,o.jsx)(a.Fragment,{children:(0,o.jsx)(n.A,{children:(0,o.jsx)(p,{...e})})},e.id)))]})})]})}}}]);
//# sourceMappingURL=636.4064eb2a.chunk.js.map